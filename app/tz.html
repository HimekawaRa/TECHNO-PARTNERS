<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Просмотр Заданий</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- MathJax: добавляем поддержку $…$ и $$…$$ -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]'], ['$$', '$$']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>
</head>
<body class="bg-gray-100 p-6 font-sans">
  <div class="max-w-3xl mx-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold mb-4">Задание</h1>
    <div id="question" class="mb-4 text-lg"></div>

    <div class="mb-4">
      <h2 class="font-semibold mb-2">Варианты ответов:</h2>
      <ul id="options" class="list-disc pl-6 space-y-1"></ul>
    </div>

    <div class="mb-4">
      <h2 class="font-semibold">Объяснение:</h2>
      <div id="explanation" class="whitespace-pre-wrap bg-gray-100 p-2 rounded mt-1"></div>
    </div>

    <div class="text-sm text-gray-600 space-y-1">
      <p><strong>Ответ:</strong> <span id="correct-answer"></span></p>
      <p><strong>Сложность:</strong> <span id="difficulty"></span></p>
      <p><strong>Раздел:</strong> <span id="section"></span></p>
      <p><strong>Тема:</strong> <span id="topic"></span></p>
    </div>

    <div class="flex justify-between mt-6">
      <button id="prevBtn" class="bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50">Назад</button>
      <button id="nextBtn" class="bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50">Вперёд</button>
    </div>
  </div>

  <!-- JSON с заданиями -->
  <script id="data" type="application/json">
{
  "questions": [
    {
      "question": "Задана функция $f(x)=x+\\frac{1}{x}$. Укажите промежутки убывания данной функции.",
      "options": {
        "A": "$[-1; 0)\\cup(0; 1]$",
        "B": "$[-1; 1]$",
        "C": "$(-\\infty; -1]\\cup[1; +\\infty)$",
        "D": "$(-\\infty; 0)\\cup(0; +\\infty)$"
      },
      "section": {
        "id": 11,
        "name": "Применение производной"
      },
      "topic": {
        "id": 216,
        "name": "Критические точки и точки экстремума функции."
      },
      "subject": "Алгебра и начала анализа",
      "class": "10 ЕМН",
      "quarter": 4,
      "language": "русский",
      "task_form": "выбор одного правильного из четырёх предложенных вариантов ответа.",
      "explanation": "$f(x)=x+\\frac{1}{x}$\n$f'(x)=\\left(x+\\frac{1}{x}\\right)'=1-\\frac{1}{x^2}$\n$f'(x)=0$\n$1-\\frac{1}{x^2}=0$\n$x=\\pm 1, x \\neq 0$\n$y'<0$ при $x\\in[-1; 0)\\cup(0; 1]$. Т.к. функции определена при $x=-1$ и $x=1$, то эти значения $x$ включены в промежутки убывания.\n$Учебник Алгебра и начала анализа. Абылкасымова А.Е. Учебник для 10 кл. естеств.-матем. направления общеобразоват. шк. Часть 2 , А.Е.Абылкасымова,Т.П. Кучер, В.Е, глава 9, §47, стр 97$",
      "learning_goals": "10.4.1.26- Знать необходимое и достаточное условие возрастания(убывания) функции на интервале\n10.4.1.27 Находить промежутки возрастания (убывания) функции",
      "score": 1,
      "correct_answer": "A",
      "difficulty_level": "A",
      "direction": "3"
    },
    {
      "question": "После бури на участке между 40-м и 70-м километровыми столбами электролинии произошёл обрыв провода. Какова вероятность того, что он произошёл между 50-м и 55-м километровыми столбами электролинии?",
      "options": {
        "A": "$\\frac{1}{7}$",
        "B": "$\\frac{1}{5}$",
        "C": "$\\frac{1}{8}$",
        "D": "$\\frac{1}{6}$"
      },
      "section": {
        "id": 6,
        "name": "Основы теории вероятности"
      },
      "topic": {
        "id": 170,
        "name": "Основы теории вероятности"
      },
      "subject": "алгебра",
      "class": "9",
      "quarter": 4,
      "language": "рус",
      "task_form": "с выбором одного правильного ответа из четырёх предложенных вариантов ответа",
      "explanation": "$вероятность того, что он произошёл между 50-м и 55-м километровыми столбами линии $= \\frac{5}{30} = \\frac{1}{6}$\\nУчебник Абылкасымова А.Е. «Алгебра 9»",
      "learning_goals": "9.3.2.5 применять геометрическую вероятность при решении задач",
      "score": 1,
      "correct_answer": "D",
      "difficulty_level": "A",
      "direction": "2"
    }
  ]
}
  </script>

  <script>
    let questions = JSON.parse(document.getElementById('data').textContent).questions;
    let currentIndex = 0;

    const questionEl      = document.getElementById('question');
    const optionsEl       = document.getElementById('options');
    const explanationEl   = document.getElementById('explanation');
    const correctAnswerEl = document.getElementById('correct-answer');
    const difficultyEl    = document.getElementById('difficulty');
    const sectionEl       = document.getElementById('section');
    const topicEl         = document.getElementById('topic');
    const prevBtn         = document.getElementById('prevBtn');
    const nextBtn         = document.getElementById('nextBtn');

    function renderQuestion(i) {
      const q = questions[i];
      questionEl.innerHTML      = q.question;
      explanationEl.innerHTML    = q.explanation || '';
      correctAnswerEl.textContent = q.correct_answer;
      difficultyEl.textContent    = q.difficulty_level;
      sectionEl.textContent       = q.section.name;
      topicEl.textContent         = q.topic.name;

      optionsEl.innerHTML = '';
      for (const [key, txt] of Object.entries(q.options)) {
        const li = document.createElement('li');
        li.textContent = `${key}: ${txt}`;
        optionsEl.appendChild(li);
      }

      // MathJax рендеринг
      if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise();
      } else if (window.MathJax) {
        MathJax.typeset();
      }

      prevBtn.disabled = (i === 0);
      nextBtn.disabled = (i === questions.length - 1);
    }

    prevBtn.onclick = () => { if (currentIndex>0) renderQuestion(--currentIndex); };
    nextBtn.onclick = () => { if (currentIndex<questions.length-1) renderQuestion(++currentIndex); };

    // Инициализация
    if (questions.length) renderQuestion(0);
  </script>
</body>
</html>
